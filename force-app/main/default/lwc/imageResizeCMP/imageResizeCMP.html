<template>
    <lightning-card title="Image Editor">
        <div class="slds-grid">
            <!-- Left column: Image list with scrollbar -->
            <div class="slds-col slds-size_1-of-1 slds-large-size_3-of-12 slds-text-align_center" style="height: 500px; overflow-y: auto;">
                <template for:each={imageLst} for:item="image">
                    <div key={image.id} class="slds-box slds-m-around_small" style={image.style}>
                        <img src={image.URL} alt="Image" data-id={image.id} onclick={handleImageClick} style="cursor: pointer; max-height:100px; max-width:100px; min-height:100px;"/>
                        <div>
                            <p>Width: {image.width}</p>
                            <p>Height: {image.height}</p>
                            <!-- Add tick & cross icons if image dimensions have changed -->
                           <template if:true={image.isModified}>
                                <lightning-icon icon-name="utility:success" alternative-text="Modified" size="x-small" class="modified-icon-tick" onclick={handleTickClick} data-id={image.id}></lightning-icon>
                            </template>
                            <template if:true={image.isModified}>
                                <lightning-icon icon-name="utility:close" alternative-text="Modified" size="x-small" class="modified-icon-cross" onclick={handleCrossClick} data-id={image.id}></lightning-icon>
                            </template>
                        </div>
                    </div>
                </template>
            </div>
            <!-- Right column: Canvas and inputs -->
            <div class="slds-col slds-size_1-of-1 slds-large-size_9-of-12 slds-text-align_center slds-p-around_medium" style="height: 500px; overflow-y: auto;">
                <!-- <div style="width:501px;height:501px;"> -->
                <canvas lwc:dom="manual" style={cvStyle} class="outputCanvas"></canvas>
                <!-- </div> -->
                <div class="slds-m-top_medium slds-grid slds-gutters">
                     <!-- <lightning-button variant="Destructive" label="Reset" title="Cancel" onclick={handleResetClick} class="slds-m-left_x-small slds-m-top_large"></lightning-button> -->
                    <lightning-input class="slds-col" label="Width" value={width} type="number" onchange={handleImagePropertiesChange} min="1" max="500"></lightning-input>
                    <lightning-input class="slds-col" label="Height" value={height} type="number" onchange={handleImagePropertiesChange} min="1" max="500"></lightning-input>
                </div>
                <!-- grid to have base buttons -->
                <div class="slds-grid slds-m-top_medium slds-m-right_xxx-small slds-gutters_small">
                    <div class="slds-col_bump-left">
                        <lightning-button variant="brand" label="Cancel" title="Cancel" onclick={handleCancelClick} class="slds-m-left_x-small"></lightning-button>

                    </div>
                    <div>
                        <lightning-button variant="brand" label="Save" title="Save" onclick={handleSaveClick} class="slds-m-left_x-small"></lightning-button>

                    </div>
                </div>
            </div>
        </div>
        
    </lightning-card>
</template>